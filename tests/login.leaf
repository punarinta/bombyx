# Login example

use web
use mysql

block myLogin
{
    param username, password

    var result = mysql::query(db, 'SELECT password FROM user WHERE username = ?', username),
        row = mysql::fetchRow(result)

    return (web::secret(password, salt) == row[0])
}

# -- connect to your DB --
var db = mysql::connect('127.0.0.1', 'root', '', 'test_db')

# -- try to login --
if (myLogin(web::fromPost('username'), web::fromPost('password')))
{
    web::render('success', [username = web::fromPost('username')])
}
else
{
    web::render('failure')
}


##
And the template file 'success.tpl' may look something like that:

<h2>Hello {{ username }},</h2>
<br/>
<p>You have logged in.</p>

##
